<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>befit Victor - Premium Gym</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Oswald:wght@500;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --brand-orange: #fb923c;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            color: #fff;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }
        .font-oswald { font-family: 'Oswald', sans-serif; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--brand-orange); border-radius: 10px; }

        /* Animations */
        .view-transition {
            animation: slideIn 0.3s ease-out forwards;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes scan {
            0%, 100% { top: 1rem; }
            50% { top: calc(100% - 1.25rem); }
        }
        .animate-scan {
            animation: scan 2s ease-in-out infinite;
        }

        @keyframes progress {
            from { width: 100%; }
            to { width: 0%; }
        }
        .animate-progress {
            animation: progress 60s linear infinite;
        }

        .nav-active { color: var(--brand-orange); }
        .nav-inactive { color: #6b7280; }

        /* Hide elements initially */
        .hidden-view { display: none; }
    </style>

    <!-- Import Map for Gemini SDK -->
    <script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.40.0",
    "react": "https://esm.sh/react@^19.2.4",
    "react/": "https://esm.sh/react@^19.2.4/",
    "react-router-dom": "https://esm.sh/react-router-dom@^7.13.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-black text-white">
    <!-- App Container -->
    <div id="app" class="max-w-md mx-auto min-h-screen relative pb-20 shadow-2xl bg-black">
        <!-- Content gets injected here -->
        <div id="view-container"></div>
    </div>

    <!-- QR Modal -->
    <div id="qr-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-6">
        <div class="absolute inset-0 bg-black/95 backdrop-blur-md" onclick="app.toggleQR(false)"></div>
        <div class="relative bg-neutral-900 border border-neutral-800 w-full max-w-xs rounded-[2.5rem] p-8 shadow-2xl shadow-orange-500/20 scale-up">
            <button onclick="app.toggleQR(false)" class="absolute top-4 right-4 text-gray-500 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="text-center mb-8">
                <h3 class="text-xl font-oswald font-bold uppercase text-white">Pase Digital</h3>
                <p class="text-xs text-orange-500 font-bold uppercase tracking-widest mt-1">befit Victor Member</p>
            </div>
            <div class="relative aspect-square bg-white rounded-3xl p-4 mb-8 shadow-[0_0_20px_rgba(251,146,60,0.2)] overflow-hidden">
                <svg viewBox="0 0 100 100" class="w-full h-full text-black">
                    <path fill="currentColor" d="M10 10h30v30h-30zM15 15v20h20v-20zM22 22h6v6h-6zM60 10h30v30h-30zM65 15v20h20v-20zM72 22h6v6h-6zM10 60h30v30h-30zM15 65v20h20v-20zM22 72h6v6h-6zM50 10h5v5h-5zM55 15h5v5h-5zM50 20h5v5h-5zM55 25h5v5h-5zM50 30h5v5h-5zM55 35h5v5h-5zM45 45h10v10h-10zM60 50h5v5h-5zM65 55h5v5h-5zM70 60h5v5h-5zM75 65h5v5h-5zM80 70h5v5h-5zM85 75h5v5h-5zM60 70h10v5h-10zM60 80h15v5h-15zM75 80h15v10h-15z" />
                    <rect x="42" y="42" width="16" height="16" fill="#fb923c" />
                </svg>
                <div class="absolute left-4 right-4 top-4 h-1 bg-orange-500/50 shadow-[0_0_10px_#fb923c] animate-scan rounded-full"></div>
            </div>
            <div class="space-y-4 text-center">
                <div class="h-1 bg-neutral-800 rounded-full overflow-hidden">
                    <div class="h-full bg-orange-500 animate-progress"></div>
                </div>
                <p class="text-[10px] text-gray-500 uppercase font-bold tracking-tighter">Acerca el código al lector</p>
            </div>
        </div>
    </div>

    <!-- Persistent Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-black/90 backdrop-blur-xl border-t border-white/10 px-8 py-4 flex justify-between items-center z-50">
        <button onclick="app.navigate('home')" class="nav-btn nav-active flex flex-col items-center gap-1" data-view="home">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
            <span class="text-[10px] font-bold uppercase tracking-widest">Inicio</span>
        </button>
        <button onclick="app.navigate('coach')" class="nav-btn nav-inactive flex flex-col items-center gap-1" data-view="coach">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
            <span class="text-[10px] font-bold uppercase tracking-widest">Coach IA</span>
        </button>
        <button onclick="app.navigate('profile')" class="nav-btn nav-inactive flex flex-col items-center gap-1" data-view="profile">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
            <span class="text-[10px] font-bold uppercase tracking-widest">Perfil</span>
        </button>
    </nav>

    <script type="module">
        import { GoogleGenAI } from "@google/genai";

        // --- CONSTANTS ---
        const CLASSES_DATA = [
            {
                id: 'boxing',
                title: 'Boxeo & Combate',
                description: 'Técnica, potencia y cardio explosivo. Domina el ring con befit Victor.',
                image: 'https://images.unsplash.com/photo-1549719386-74dfcbf7dbed?q=80&w=800&auto=format&fit=crop',
                subTypes: ['Boxeo Recreativo', 'Boxeo Pro', 'Manoplas', 'Saco de Golpeo']
            },
            {
                id: 'martial-arts',
                title: 'Artes Marciales',
                description: 'Disciplina y defensa personal. Muay Thai, BJJ y entrenamiento híbrido.',
                image: 'https://images.unsplash.com/photo-1555597673-b21d5c935865?q=80&w=800&auto=format&fit=crop',
                subTypes: ['BJJ (Jiu-Jitsu)', 'Muay Thai', 'MMA', 'Defensa Personal']
            },
            {
                id: 'fitness',
                title: 'Sala Fitness',
                description: 'Entrenamiento de fuerza e hipertrofia muscular de alto rendimiento.',
                image: 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=800&auto=format&fit=crop',
                subTypes: ['Powerlifting', 'Bodybuilding', 'Funcional / HIIT', 'Movilidad']
            }
        ];

        // --- STATE ---
        let state = {
            currentView: 'home',
            selectedClass: null,
            chatHistory: []
        };

        const ai = new GoogleGenAI({ apiKey: "REPLACE_WITH_YOUR_KEY" }); // Note: Using process.env.API_KEY logic below
        
        // --- ROUTING & RENDERER ---
        const app = {
            navigate(view, data = null) {
                state.currentView = view;
                if (data) state.selectedClass = CLASSES_DATA.find(c => c.id === data);
                this.render();
                window.scrollTo(0, 0);
            },

            toggleQR(show) {
                const modal = document.getElementById('qr-modal');
                modal.classList.toggle('hidden', !show);
                modal.classList.toggle('flex', show);
            },

            render() {
                const container = document.getElementById('view-container');
                container.innerHTML = '';
                
                // Update nav state
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    const isActive = btn.dataset.view === state.currentView;
                    btn.classList.toggle('nav-active', isActive);
                    btn.classList.toggle('nav-inactive', !isActive);
                });

                const viewDiv = document.createElement('div');
                viewDiv.className = 'view-transition';

                switch(state.currentView) {
                    case 'home': viewDiv.innerHTML = this.templates.home(); break;
                    case 'detail': viewDiv.innerHTML = this.templates.detail(state.selectedClass); break;
                    case 'booking': viewDiv.innerHTML = this.templates.booking(); break;
                    case 'coach': 
                        viewDiv.innerHTML = this.templates.coach(); 
                        setTimeout(() => this.initCoach(), 0);
                        break;
                    case 'profile': viewDiv.innerHTML = this.templates.profile(); break;
                    case 'success': viewDiv.innerHTML = this.templates.success(); break;
                }
                container.appendChild(viewDiv);
            },

            templates: {
                home: () => `
                    <header class="px-6 pt-12 pb-8 bg-gradient-to-b from-orange-900/20 to-transparent">
                        <h1 class="text-5xl font-oswald font-black uppercase tracking-tighter text-white mb-2 leading-none">
                            befit <span class="text-orange-400">Victor</span>
                        </h1>
                        <p class="text-gray-400 text-lg">Fuerza, técnica y resultados de élite.</p>
                    </header>

                    <section class="px-6 mb-8">
                        <div class="bg-neutral-900/50 backdrop-blur-md rounded-3xl p-6 border border-neutral-800 shadow-xl">
                            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                Gym Status: <span class="text-orange-400">Entrenando</span>
                            </h2>
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-[10px] text-gray-500 uppercase font-black tracking-widest">Próxima Clase</p>
                                    <p class="font-semibold text-sm">MMA Pro @ 19:30</p>
                                </div>
                                <button class="bg-orange-500 text-black px-4 py-2 rounded-xl font-bold text-[10px] uppercase shadow-lg shadow-orange-500/20">Calendario</button>
                            </div>
                        </div>
                    </section>

                    <section class="px-6 mb-8">
                        <div onclick="app.toggleQR(true)" class="bg-orange-500/10 border border-orange-500/30 rounded-3xl p-5 flex items-center gap-4 cursor-pointer active:scale-95 transition-all">
                            <div class="w-12 h-12 bg-orange-500 rounded-2xl flex items-center justify-center text-black shadow-lg shadow-orange-500/20">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" /></svg>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-white uppercase text-sm">Entrada Digital</h4>
                                <p class="text-[10px] text-orange-400 font-bold uppercase tracking-tight">Pulsa para abrir tu QR de acceso</p>
                            </div>
                            <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                        </div>
                    </section>

                    <section class="px-6 space-y-6">
                        <h2 class="text-2xl font-oswald font-bold uppercase">Nuestras Disciplinas</h2>
                        <div class="grid grid-cols-1 gap-6">
                            ${CLASSES_DATA.map(cat => `
                                <div onclick="app.navigate('detail', '${cat.id}')" class="relative group overflow-hidden rounded-2xl cursor-pointer shadow-2xl border border-white/5">
                                    <img src="${cat.image}" class="w-full h-56 object-cover filter brightness-50 group-hover:scale-105 transition-transform duration-700" />
                                    <div class="absolute inset-0 p-6 flex flex-col justify-end">
                                        <h3 class="text-3xl font-oswald font-bold uppercase text-orange-400 mb-1 leading-none">${cat.title}</h3>
                                        <p class="text-gray-300 text-xs line-clamp-2">${cat.description}</p>
                                    </div>
                                    <div class="absolute top-4 right-4 bg-orange-500 text-black font-black px-3 py-1 rounded-full text-[10px] uppercase shadow-lg">Descubrir</div>
                                </div>
                            `).join('')}
                        </div>
                    </section>

                    <!-- FAB Access -->
                    <button onclick="app.toggleQR(true)" class="fixed bottom-24 right-6 w-16 h-16 bg-orange-500 text-black rounded-full flex items-center justify-center shadow-2xl shadow-orange-500/50 z-40 active:scale-90 transition-all border-4 border-black">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" /></svg>
                    </button>
                `,

                detail: (cat) => `
                    <div class="relative h-72 shadow-2xl">
                        <img src="${cat.image}" class="w-full h-full object-cover filter brightness-50" />
                        <button onclick="app.navigate('home')" class="absolute top-8 left-6 bg-black/50 p-3 rounded-full backdrop-blur-md border border-white/10">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                        </button>
                        <div class="absolute bottom-8 left-6">
                            <h2 class="text-5xl font-oswald font-bold uppercase text-white leading-none">${cat.title}</h2>
                        </div>
                    </div>
                    
                    <div class="p-6 space-y-8">
                        <section>
                            <h3 class="text-orange-400 font-bold uppercase mb-2 text-sm tracking-widest">El Entrenamiento</h3>
                            <p class="text-gray-300 leading-relaxed text-sm">${cat.description}</p>
                        </section>

                        <section>
                            <h3 class="text-orange-400 font-bold uppercase mb-4 text-sm tracking-widest">Modalidades</h3>
                            <div class="grid grid-cols-1 gap-4">
                                ${cat.subTypes.map(type => `
                                    <div onclick="app.navigate('booking')" class="bg-neutral-900/50 p-5 rounded-2xl border border-neutral-800 flex justify-between items-center active:bg-orange-500/20 transition-all cursor-pointer group">
                                        <span class="font-bold text-lg">${type}</span>
                                        <div class="flex items-center gap-2">
                                            <span class="text-[10px] text-gray-500 uppercase font-black group-hover:text-orange-400">Reservar</span>
                                            <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                    </div>
                `,

                booking: () => `
                    <div class="p-6 min-h-screen bg-black">
                        <button onclick="app.navigate('home')" class="mb-8 bg-neutral-900 p-3 rounded-full text-white border border-white/5">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                        </button>
                        <div class="mb-8">
                            <span class="text-orange-500 font-bold uppercase tracking-widest text-xs">Confirmación</span>
                            <h2 class="text-4xl font-oswald font-bold uppercase text-white mt-2">Detalles de Sesión</h2>
                        </div>
                        <div class="space-y-6">
                            <div class="bg-neutral-900 rounded-[2rem] p-8 border border-neutral-800 space-y-8 shadow-2xl">
                                <div class="flex items-center gap-5">
                                    <div class="w-12 h-12 rounded-2xl bg-orange-500/10 flex items-center justify-center text-orange-500 border border-orange-500/20">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                    </div>
                                    <div>
                                        <p class="text-white font-bold">Hoy, 19:30 - 20:30</p>
                                        <p class="text-gray-500 text-xs font-medium">Clase Pro - 60 min</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-5">
                                    <div class="w-12 h-12 rounded-2xl bg-orange-500/10 flex items-center justify-center text-orange-500 border border-orange-500/20">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                                    </div>
                                    <div>
                                        <p class="text-white font-bold">Coach Victor</p>
                                        <p class="text-gray-500 text-xs font-medium">Master Head Trainer</p>
                                    </div>
                                </div>
                                <div class="pt-4 border-t border-white/5">
                                    <p class="text-center text-[10px] text-gray-500 uppercase font-black tracking-widest">Reserva Ilimitada con tu Plan VIP</p>
                                </div>
                            </div>
                            <button onclick="app.navigate('success')" class="w-full bg-orange-500 text-black py-5 rounded-2xl font-black uppercase tracking-widest active:scale-95 transition-all shadow-xl shadow-orange-500/40">
                                Confirmar Reserva
                            </button>
                        </div>
                    </div>
                `,

                success: () => `
                    <div class="flex flex-col items-center justify-center min-h-[80vh] text-center p-6">
                        <div class="w-28 h-28 bg-orange-500 rounded-full flex items-center justify-center mb-8 shadow-2xl shadow-orange-500/50">
                            <svg class="w-14 h-14 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7" /></svg>
                        </div>
                        <h2 class="text-4xl font-oswald font-bold uppercase mb-3 text-white">¡Reserva Lista!</h2>
                        <p class="text-gray-400 mb-10 text-lg">No faltes. El ring de befit Victor te espera.</p>
                        <button onclick="app.navigate('home')" class="text-orange-500 font-black uppercase tracking-widest text-sm border-b-2 border-orange-500 pb-1">Volver al inicio</button>
                    </div>
                `,

                coach: () => `
                    <div class="flex flex-col h-[calc(100vh-80px)] p-4 bg-black">
                        <header class="mb-4 pt-4">
                            <h2 class="text-3xl font-oswald font-bold uppercase text-orange-400 leading-none mb-1">Coach IA Victor</h2>
                            <p class="text-[10px] text-gray-500 font-black uppercase tracking-widest">Soporte Técnico y Motivación</p>
                        </header>
                        <div id="chat-box" class="flex-1 overflow-y-auto space-y-4 mb-4 pr-1 scroll-smooth">
                            <div class="flex justify-start">
                                <div class="bg-neutral-900 border border-neutral-800 text-gray-200 px-5 py-3 rounded-2xl rounded-tl-none max-w-[85%] text-sm shadow-lg">
                                    ¡Hola, guerrero! Soy tu Coach virtual. ¿Tienes dudas sobre técnica, nutrición o tu plan de entrenamiento hoy?
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-2 bg-neutral-900 p-2 rounded-2xl border border-neutral-800 shadow-2xl">
                            <input id="coach-input" placeholder="Pregunta algo al coach..." class="flex-1 bg-transparent px-4 py-3 outline-none text-white text-sm" />
                            <button id="coach-send" class="bg-orange-500 text-black p-4 rounded-xl active:scale-95 shadow-lg shadow-orange-500/20">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>
                            </button>
                        </div>
                    </div>
                `,

                profile: () => `
                    <div class="p-6 space-y-10">
                        <div class="flex items-center gap-6 mt-10">
                            <div class="relative">
                                <div class="w-24 h-24 rounded-full overflow-hidden border-4 border-orange-500 shadow-2xl shadow-orange-500/30">
                                    <img src="https://i.pravatar.cc/300?img=12" class="w-full h-full object-cover" />
                                </div>
                                <div class="absolute -bottom-1 -right-1 bg-green-500 w-6 h-6 rounded-full border-4 border-black"></div>
                            </div>
                            <div>
                                <h2 class="text-3xl font-oswald font-bold uppercase text-white leading-none">Guerrero befit</h2>
                                <p class="text-orange-400 font-black uppercase text-[10px] tracking-widest mt-1">Socio Élite desde 2024</p>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div onclick="app.toggleQR(true)" class="bg-gradient-to-br from-neutral-800 to-neutral-950 p-7 rounded-[2.5rem] border border-orange-500/20 shadow-2xl cursor-pointer active:scale-95 transition-all group relative overflow-hidden">
                                <div class="absolute top-0 right-0 w-32 h-32 bg-orange-500/5 rounded-full -mr-16 -mt-16 blur-3xl"></div>
                                <div class="flex justify-between items-start mb-6">
                                    <div>
                                        <p class="text-[10px] text-gray-500 uppercase font-black tracking-tighter mb-1">ID SOCIO: BV-4785</p>
                                        <h3 class="text-2xl font-oswald font-bold text-white uppercase">Membresía VIP</h3>
                                    </div>
                                    <div class="bg-white p-2.5 rounded-2xl group-hover:rotate-12 transition-transform shadow-lg">
                                        <svg class="w-10 h-10 text-black" fill="currentColor" viewBox="0 0 24 24"><path d="M3 3h8v8H3V3zm2 2v4h4V5H5zm8-2h8v8h-8V3zm2 2v4h4V5h-4zM3 13h8v8H3v-8zm2 2v4h4v-4H5zm13-2h3v2h-3v-2zm-3 0h2v3h-2v-3zm3 3h2v2h-2v-2zm-3 2h3v3h-3v-3zm3 3h2v2h-2v-2zm3-3h3v2h-3v-2zm0 3h3v2h-3v-2z" /></svg>
                                    </div>
                                </div>
                                <div class="bg-orange-500/20 py-2 rounded-xl border border-orange-500/10">
                                    <p class="text-orange-400 text-[10px] font-black uppercase tracking-widest text-center">Toca para abrir pase de entrada</p>
                                </div>
                            </div>

                            <div class="bg-neutral-900/50 p-6 rounded-3xl border border-neutral-800 space-y-5 shadow-xl">
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-500 font-black uppercase text-[10px] tracking-widest">Email</span>
                                        <span class="text-white text-sm font-medium">socio@victor.com</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-500 font-black uppercase text-[10px] tracking-widest">Sede</span>
                                        <span class="text-white text-sm font-medium">befit Victor Madrid</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-500 font-black uppercase text-[10px] tracking-widest">Plan</span>
                                        <span class="text-orange-500 font-black uppercase text-xs">Fuerza Ilimitada</span>
                                    </div>
                                </div>
                            </div>

                            <button class="w-full bg-red-500/10 border border-red-500/20 text-red-500 py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest active:scale-95 transition-all">
                                Cerrar Sesión Segura
                            </button>
                        </div>
                    </div>
                `
            },

            async initCoach() {
                const input = document.getElementById('coach-input');
                const sendBtn = document.getElementById('coach-send');
                const chatBox = document.getElementById('chat-box');

                if (!input || !sendBtn) return;

                const addMsg = (role, text, id = null) => {
                    const msgDiv = document.createElement('div');
                    msgDiv.className = `flex ${role === 'user' ? 'justify-end' : 'justify-start'}`;
                    msgDiv.innerHTML = `
                        <div ${id ? `id="${id}"` : ''} class="max-w-[85%] px-5 py-3 rounded-2xl text-sm shadow-md ${
                            role === 'user' 
                                ? 'bg-orange-600 text-white rounded-tr-none' 
                                : 'bg-neutral-900 border border-neutral-800 text-gray-200 rounded-tl-none'
                        }">
                            ${text}
                        </div>
                    `;
                    chatBox.appendChild(msgDiv);
                    chatBox.scrollTop = chatBox.scrollHeight;
                };

                const handleSend = async () => {
                    const text = input.value.trim();
                    if (!text) return;

                    input.value = '';
                    addMsg('user', text);
                    state.chatHistory.push({ role: 'user', parts: [{ text }] });

                    const loadingId = 'loading-' + Date.now();
                    addMsg('model', '...', loadingId);

                    try {
                        const response = await ai.models.generateContent({
                            model: 'gemini-3-flash-preview',
                            contents: state.chatHistory,
                            config: {
                                systemInstruction: `Eres Victor, el Coach de befit Victor. Eres motivador, directo y experto en Boxeo, Artes Marciales y Fitness. Tu gimnasio es premium y exigente. Responde siempre en español de España. Tono naranja/energético.`,
                                temperature: 0.8
                            }
                        });

                        const loadingEl = document.getElementById(loadingId);
                        if (loadingEl) loadingEl.innerText = response.text;
                        state.chatHistory.push({ role: 'model', parts: [{ text: response.text }] });
                    } catch (e) {
                        const loadingEl = document.getElementById(loadingId);
                        if (loadingEl) loadingEl.innerText = "¡No te rindas! Hubo un problema técnico, pregúntame de nuevo.";
                    }
                    chatBox.scrollTop = chatBox.scrollHeight;
                };

                sendBtn.onclick = handleSend;
                input.onkeypress = (e) => { if(e.key === 'Enter') handleSend(); };
            }
        };

        // --- EXPOSE TO WINDOW ---
        window.app = app;
        
        // --- START APP ---
        document.addEventListener('DOMContentLoaded', () => {
            app.render();
        });
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
